#!/bin/bash

read -r -d '' sql<<-EOM
UPDATE metno.resultsshp SET basin = ST_MakeValid(basin); 
DROP TABLE IF EXISTS metno.dataBoundaries;
CREATE TABLE metno.dataBoundaries(sid SERIAL PRIMARY KEY, boundary geometry(MULTIPOLYGON, 3035) );
INSERT INTO metno.dataBoundaries(boundary) VALUES (ST_SetSRID('0106000000300000000103000000010000000500000000000000206B504100000000CC9B4F4100000000206B504100000000C09D4F41000000001A6C504100000000C09D4F41000000001A6C504100000000CC9B4F4100000000206B504100000000CC9B4F410103000000010000000500000000000000206B504100000000D8994F4100000000206B504100000000CC9B4F41000000001A6C504100000000CC9B4F41000000001A6C504100000000D8994F4100000000206B504100000000D8994F410103000000010000000500000000000000206B504100000000E4974F4100000000206B504100000000D8994F41000000001A6C504100000000D8994F41000000001A6C504100000000E4974F4100000000206B504100000000E4974F410103000000010000000500000000000000206B504100000000F0954F4100000000206B504100000000E4974F41000000001A6C504100000000E4974F41000000001A6C504100000000F0954F4100000000206B504100000000F0954F410103000000010000000500000000000000206B504100000000FC934F4100000000206B504100000000F0954F41000000001A6C504100000000F0954F41000000001A6C504100000000FC934F4100000000206B504100000000FC934F410103000000010000000500000000000000206B50410000000008924F4100000000206B504100000000FC934F41000000001A6C504100000000FC934F41000000001A6C50410000000008924F4100000000206B50410000000008924F410103000000010000000500000000000000206B50410000000014904F4100000000206B50410000000008924F41000000001A6C50410000000008924F41000000001A6C50410000000014904F4100000000206B50410000000014904F410103000000010000000500000000000000206B504100000000208E4F4100000000206B50410000000014904F41000000001A6C50410000000014904F41000000001A6C504100000000208E4F4100000000206B504100000000208E4F4101030000000100000005000000000000001A6C504100000000CC9B4F41000000001A6C504100000000C09D4F4100000000146D504100000000C09D4F4100000000146D504100000000CC9B4F41000000001A6C504100000000CC9B4F4101030000000100000005000000000000001A6C504100000000D8994F41000000001A6C504100000000CC9B4F4100000000146D504100000000CC9B4F4100000000146D504100000000D8994F41000000001A6C504100000000D8994F4101030000000100000005000000000000001A6C504100000000E4974F41000000001A6C504100000000D8994F4100000000146D504100000000D8994F4100000000146D504100000000E4974F41000000001A6C504100000000E4974F4101030000000100000005000000000000001A6C504100000000F0954F41000000001A6C504100000000E4974F4100000000146D504100000000E4974F4100000000146D504100000000F0954F41000000001A6C504100000000F0954F4101030000000100000005000000000000001A6C504100000000FC934F41000000001A6C504100000000F0954F4100000000146D504100000000F0954F4100000000146D504100000000FC934F41000000001A6C504100000000FC934F4101030000000100000005000000000000001A6C50410000000008924F41000000001A6C504100000000FC934F4100000000146D504100000000FC934F4100000000146D50410000000008924F41000000001A6C50410000000008924F4101030000000100000005000000000000001A6C50410000000014904F41000000001A6C50410000000008924F4100000000146D50410000000008924F4100000000146D50410000000014904F41000000001A6C50410000000014904F4101030000000100000005000000000000001A6C504100000000208E4F41000000001A6C50410000000014904F4100000000146D50410000000014904F4100000000146D504100000000208E4F41000000001A6C504100000000208E4F410103000000010000000500000000000000146D504100000000CC9B4F4100000000146D504100000000C09D4F41000000000E6E504100000000C09D4F41000000000E6E504100000000CC9B4F4100000000146D504100000000CC9B4F410103000000010000000500000000000000146D504100000000D8994F4100000000146D504100000000CC9B4F41000000000E6E504100000000CC9B4F41000000000E6E504100000000D8994F4100000000146D504100000000D8994F410103000000010000000500000000000000146D504100000000E4974F4100000000146D504100000000D8994F41000000000E6E504100000000D8994F41000000000E6E504100000000E4974F4100000000146D504100000000E4974F410103000000010000000500000000000000146D504100000000F0954F4100000000146D504100000000E4974F41000000000E6E504100000000E4974F41000000000E6E504100000000F0954F4100000000146D504100000000F0954F410103000000010000000500000000000000146D504100000000FC934F4100000000146D504100000000F0954F41000000000E6E504100000000F0954F41000000000E6E504100000000FC934F4100000000146D504100000000FC934F410103000000010000000500000000000000146D50410000000008924F4100000000146D504100000000FC934F41000000000E6E504100000000FC934F41000000000E6E50410000000008924F4100000000146D50410000000008924F410103000000010000000500000000000000146D50410000000014904F4100000000146D50410000000008924F41000000000E6E50410000000008924F41000000000E6E50410000000014904F4100000000146D50410000000014904F410103000000010000000500000000000000146D504100000000208E4F4100000000146D50410000000014904F41000000000E6E50410000000014904F41000000000E6E504100000000208E4F4100000000146D504100000000208E4F4101030000000100000005000000000000000E6E504100000000CC9B4F41000000000E6E504100000000C09D4F4100000000086F504100000000C09D4F4100000000086F504100000000CC9B4F41000000000E6E504100000000CC9B4F4101030000000100000005000000000000000E6E504100000000D8994F41000000000E6E504100000000CC9B4F4100000000086F504100000000CC9B4F4100000000086F504100000000D8994F41000000000E6E504100000000D8994F4101030000000100000005000000000000000E6E504100000000E4974F41000000000E6E504100000000D8994F4100000000086F504100000000D8994F4100000000086F504100000000E4974F41000000000E6E504100000000E4974F4101030000000100000005000000000000000E6E504100000000F0954F41000000000E6E504100000000E4974F4100000000086F504100000000E4974F4100000000086F504100000000F0954F41000000000E6E504100000000F0954F4101030000000100000005000000000000000E6E504100000000FC934F41000000000E6E504100000000F0954F4100000000086F504100000000F0954F4100000000086F504100000000FC934F41000000000E6E504100000000FC934F4101030000000100000005000000000000000E6E50410000000008924F41000000000E6E504100000000FC934F4100000000086F504100000000FC934F4100000000086F50410000000008924F41000000000E6E50410000000008924F4101030000000100000005000000000000000E6E50410000000014904F41000000000E6E50410000000008924F4100000000086F50410000000008924F4100000000086F50410000000014904F41000000000E6E50410000000014904F4101030000000100000005000000000000000E6E504100000000208E4F41000000000E6E50410000000014904F4100000000086F50410000000014904F4100000000086F504100000000208E4F41000000000E6E504100000000208E4F410103000000010000000500000000000000086F504100000000CC9B4F4100000000086F504100000000C09D4F41000000000270504100000000C09D4F41000000000270504100000000CC9B4F4100000000086F504100000000CC9B4F410103000000010000000500000000000000086F504100000000D8994F4100000000086F504100000000CC9B4F41000000000270504100000000CC9B4F41000000000270504100000000D8994F4100000000086F504100000000D8994F410103000000010000000500000000000000086F504100000000E4974F4100000000086F504100000000D8994F41000000000270504100000000D8994F41000000000270504100000000E4974F4100000000086F504100000000E4974F410103000000010000000500000000000000086F504100000000F0954F4100000000086F504100000000E4974F41000000000270504100000000E4974F41000000000270504100000000F0954F4100000000086F504100000000F0954F410103000000010000000500000000000000086F504100000000FC934F4100000000086F504100000000F0954F41000000000270504100000000F0954F41000000000270504100000000FC934F4100000000086F504100000000FC934F410103000000010000000500000000000000086F50410000000008924F4100000000086F504100000000FC934F41000000000270504100000000FC934F4100000000027050410000000008924F4100000000086F50410000000008924F410103000000010000000500000000000000086F50410000000014904F4100000000086F50410000000008924F4100000000027050410000000008924F4100000000027050410000000014904F4100000000086F50410000000014904F410103000000010000000500000000000000086F504100000000208E4F4100000000086F50410000000014904F4100000000027050410000000014904F41000000000270504100000000208E4F4100000000086F504100000000208E4F4101030000000100000005000000000000000270504100000000CC9B4F41000000000270504100000000C09D4F4100000000FC70504100000000C09D4F4100000000FC70504100000000CC9B4F41000000000270504100000000CC9B4F4101030000000100000005000000000000000270504100000000D8994F41000000000270504100000000CC9B4F4100000000FC70504100000000CC9B4F4100000000FC70504100000000D8994F41000000000270504100000000D8994F4101030000000100000005000000000000000270504100000000E4974F41000000000270504100000000D8994F4100000000FC70504100000000D8994F4100000000FC70504100000000E4974F41000000000270504100000000E4974F4101030000000100000005000000000000000270504100000000F0954F41000000000270504100000000E4974F4100000000FC70504100000000E4974F4100000000FC70504100000000F0954F41000000000270504100000000F0954F4101030000000100000005000000000000000270504100000000FC934F41000000000270504100000000F0954F4100000000FC70504100000000F0954F4100000000FC70504100000000FC934F41000000000270504100000000FC934F410103000000010000000500000000000000027050410000000008924F41000000000270504100000000FC934F4100000000FC70504100000000FC934F4100000000FC7050410000000008924F4100000000027050410000000008924F410103000000010000000500000000000000027050410000000014904F4100000000027050410000000008924F4100000000FC7050410000000008924F4100000000FC7050410000000014904F4100000000027050410000000014904F4101030000000100000005000000000000000270504100000000208E4F4100000000027050410000000014904F4100000000FC7050410000000014904F4100000000FC70504100000000208E4F41000000000270504100000000208E4F41'::geometry,3035));
DROP INDEX IF EXISTS metno_data_boundary_gix;
CREATE INDEX metno_data_boundary_gix ON metno.dataBoundaries USING GIST(boundary);
DROP INDEX IF EXISTS metno_basins_gix;
CREATE INDEX metno_basins_gix ON metno.resultsShp USING GIST(basin);
EOM
echo $sql | psql -d geonorway
